import{g as d,y as O,c as i,o as a,a as e,b as c,s as G,j as S,d as u,l as h,x as _,w as m,m as b,p as z,F as V,r as E,t as r,n as F,i as N,k as A,q as R,f as k}from"./inertia-app-BhfqKf1u.js";const J={class:"min-h-screen bg-gray-50"},K={class:"bg-white shadow mb-8"},Q={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},W={class:"flex justify-between h-16"},X={class:"flex items-center"},Y={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mb-8"},Z={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},ee={class:"flex justify-between items-center"},te={class:"flex space-x-3"},se={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},le={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6"},oe={class:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0"},ae={class:"flex-1 max-w-md"},re={class:"relative"},ne={class:"flex items-center space-x-4"},ie={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},de={class:"overflow-x-auto"},ue={class:"min-w-full divide-y divide-gray-200"},ce={class:"bg-white divide-y divide-gray-200"},me={class:"px-6 py-4 whitespace-nowrap"},pe={class:"flex items-center"},xe={class:"ml-4"},fe={class:"text-sm font-medium text-gray-900"},ve={class:"text-sm text-gray-500"},be={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ge={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ye={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},we={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},he={class:"px-6 py-4 whitespace-nowrap"},_e={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ke={class:"flex items-center space-x-2"},De=["onClick"],Ce=["onClick"],Me=["onClick"],je={key:0},Se={colspan:"6",class:"px-6 py-12 text-center text-gray-500"},Ve={class:"flex flex-col items-center"},Ee={class:"text-sm"},Ne={key:0,class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},Ae={class:"flex-1 flex justify-between sm:hidden"},Le={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Te={class:"text-sm text-gray-700"},Ue={class:"font-medium"},ze={class:"font-medium"},Fe={class:"font-medium"},$e={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},Be={class:"mt-3"},He={class:"flex items-center justify-between mb-4"},Pe={class:"text-lg font-medium text-gray-900"},qe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ie={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Oe=["value"],Ge={class:"flex items-center"},Re={class:"flex justify-end space-x-3 pt-4"},Je=["disabled"],Ke={key:0,class:"fas fa-spinner fa-spin mr-2"},Qe={class:"mt-3 text-center"},We={class:"mt-2 px-7 py-3"},Xe={class:"text-sm text-gray-500"},Ye={class:"flex justify-center space-x-3 mt-4"},Ze=["disabled"],et={key:0,class:"fas fa-spinner fa-spin mr-2"},st={__name:"DepartmentIndex",props:{departments:Object,companies:Array,parentDepartments:Array},setup(n){const L=n,p=d(!1),D=d(!1),C=d(!1),x=d(!1),g=d(!1),f=d(""),y=d(""),w=d(null),M=d(null),o=d({name:"",code:"",description:"",parent_id:"",level:1,is_active:!0,company_id:1}),T=O(()=>{if(!L.departments.data)return[];let l=L.departments.data;if(f.value){const t=f.value.toLowerCase();l=l.filter(s=>s.name.toLowerCase().includes(t)||s.code.toLowerCase().includes(t)||s.description&&s.description.toLowerCase().includes(t))}return y.value!==""&&(l=l.filter(t=>t.is_active==y.value)),l}),v=()=>{p.value=!1,D.value=!1,$()},j=()=>{C.value=!1,w.value=null},$=()=>{o.value={name:"",code:"",description:"",parent_id:"",level:1,is_active:!0,company_id:1},M.value=null},B=l=>{M.value=l,o.value={name:l.name,code:l.code,description:l.description||"",parent_id:l.parent_id||"",level:l.level||1,is_active:l.is_active,company_id:l.company_id},D.value=!0},H=l=>{k.visit(`/departments/${l.id}`)},P=l=>{w.value=l,C.value=!0},q=()=>{x.value=!0,p.value?k.post("/departments",o.value,{onSuccess:()=>{v()},onError:()=>{},onFinish:()=>{x.value=!1}}):k.put(`/departments/${M.value.id}`,o.value,{onSuccess:()=>{v()},onError:()=>{},onFinish:()=>{x.value=!1}})},I=()=>{g.value=!0,k.delete(`/departments/${w.value.id}`,{onSuccess:()=>{j()},onError:()=>{},onFinish:()=>{g.value=!1}})};return(l,t)=>(a(),i("div",J,[e("nav",K,[e("div",Q,[e("div",W,[e("div",X,[G(h(_),{href:"/dashboard",class:"text-xl font-bold text-blue-600 hover:text-blue-700"},{default:S(()=>[...t[11]||(t[11]=[e("i",{class:"fas fa-arrow-left mr-2"},null,-1),u("PH HRMS ",-1)])]),_:1})]),t[12]||(t[12]=e("div",{class:"flex items-center space-x-4"},[e("span",{class:"text-sm text-gray-700"},"Organization Management")],-1))])])]),e("div",Y,[e("div",Z,[e("div",ee,[t[14]||(t[14]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 flex items-center"},[e("i",{class:"fas fa-building text-blue-600 mr-3"}),u(" Department Management ")]),e("p",{class:"text-gray-600 mt-1"},"Manage organizational departments and their structure")],-1)),e("div",te,[e("button",{onClick:t[0]||(t[0]=s=>p.value=!0),class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors"},[...t[13]||(t[13]=[e("i",{class:"fas fa-plus"},null,-1),e("span",null,"Add Department",-1)])])])])])]),e("div",se,[e("div",le,[e("div",oe,[e("div",ae,[e("div",re,[t[15]||(t[15]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("i",{class:"fas fa-search text-gray-400"})],-1)),m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>f.value=s),type:"text",placeholder:"Search departments...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,512),[[b,f.value]])])]),e("div",ne,[m(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>y.value=s),class:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-500 focus:border-blue-500"},[...t[16]||(t[16]=[e("option",{value:""},"All Status",-1),e("option",{value:"1"},"Active",-1),e("option",{value:"0"},"Inactive",-1)])],512),[[z,y.value]])])])]),e("div",ie,[e("div",de,[e("table",ue,[t[23]||(t[23]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Department "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Code "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Parent Department "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Employees "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",ce,[(a(!0),i(V,null,E(T.value,s=>(a(),i("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",me,[e("div",pe,[t[17]||(t[17]=e("div",{class:"flex-shrink-0 h-10 w-10"},[e("div",{class:"h-10 w-10 rounded-lg bg-blue-100 flex items-center justify-center"},[e("i",{class:"fas fa-building text-blue-600"})])],-1)),e("div",xe,[e("div",fe,r(s.name),1),e("div",ve,r(s.description||"No description"),1)])])]),e("td",be,r(s.code),1),e("td",ge,r(s.parent?.name||"None"),1),e("td",ye,[e("span",we,r(s.employees_count||0)+" employees ",1)]),e("td",he,[e("span",{class:F(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},r(s.is_active?"Active":"Inactive"),3)]),e("td",_e,[e("div",ke,[e("button",{onClick:U=>B(s),class:"text-blue-600 hover:text-blue-900 p-1 rounded",title:"Edit"},[...t[18]||(t[18]=[e("i",{class:"fas fa-edit"},null,-1)])],8,De),e("button",{onClick:U=>H(s),class:"text-green-600 hover:text-green-900 p-1 rounded",title:"View"},[...t[19]||(t[19]=[e("i",{class:"fas fa-eye"},null,-1)])],8,Ce),e("button",{onClick:U=>P(s),class:"text-red-600 hover:text-red-900 p-1 rounded",title:"Delete"},[...t[20]||(t[20]=[e("i",{class:"fas fa-trash"},null,-1)])],8,Me)])])]))),128)),T.value.length===0?(a(),i("tr",je,[e("td",Se,[e("div",Ve,[t[21]||(t[21]=e("i",{class:"fas fa-building text-gray-300 text-4xl mb-4"},null,-1)),t[22]||(t[22]=e("p",{class:"text-lg font-medium"},"No departments found",-1)),e("p",Ee,r(f.value?"Try adjusting your search criteria":"Get started by creating your first department"),1)])])])):c("",!0)])])]),n.departments.data&&n.departments.data.length>0?(a(),i("div",Ne,[e("div",Ae,[n.departments.prev_page_url?(a(),N(h(_),{key:0,href:n.departments.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:S(()=>[...t[24]||(t[24]=[u(" Previous ",-1)])]),_:1},8,["href"])):c("",!0),n.departments.next_page_url?(a(),N(h(_),{key:1,href:n.departments.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:S(()=>[...t[25]||(t[25]=[u(" Next ",-1)])]),_:1},8,["href"])):c("",!0)]),e("div",Le,[e("div",null,[e("p",Te,[t[26]||(t[26]=u(" Showing ",-1)),e("span",Ue,r(n.departments.from),1),t[27]||(t[27]=u(" to ",-1)),e("span",ze,r(n.departments.to),1),t[28]||(t[28]=u(" of ",-1)),e("span",Fe,r(n.departments.total),1),t[29]||(t[29]=u(" results ",-1))])]),e("div",null,[e("nav",$e,[(a(!0),i(V,null,E(n.departments.links,s=>(a(),N(h(_),{key:s.label,href:s.url,innerHTML:s.label,class:F(["relative inline-flex items-center px-2 py-2 border text-sm font-medium",s.active?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50",s.url===null?"cursor-not-allowed opacity-50":"cursor-pointer"])},null,8,["href","innerHTML","class"]))),128))])])])])):c("",!0)])]),p.value||D.value?(a(),i("div",{key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",onClick:v},[e("div",{class:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",onClick:t[9]||(t[9]=A(()=>{},["stop"]))},[e("div",Be,[e("div",He,[e("h3",Pe,r(p.value?"Create New Department":"Edit Department"),1),e("button",{onClick:v,class:"text-gray-400 hover:text-gray-600"},[...t[30]||(t[30]=[e("i",{class:"fas fa-times"},null,-1)])])]),e("form",{onSubmit:A(q,["prevent"]),class:"space-y-4"},[e("div",qe,[e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Department Name * ",-1)),m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.value.name=s),type:"text",required:"",class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter department name"},null,512),[[b,o.value.name]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Department Code * ",-1)),m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.value.code=s),type:"text",required:"",class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter department code"},null,512),[[b,o.value.code]])])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Description ",-1)),m(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.value.description=s),rows:"3",class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter department description"},null,512),[[b,o.value.description]])]),e("div",Ie,[e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Parent Department ",-1)),m(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>o.value.parent_id=s),class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-500 focus:border-blue-500"},[t[34]||(t[34]=e("option",{value:""},"None (Top Level)",-1)),(a(!0),i(V,null,E(n.parentDepartments,s=>(a(),i("option",{key:s.id,value:s.id},r(s.name),9,Oe))),128))],512),[[z,o.value.parent_id]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Level ",-1)),m(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>o.value.level=s),type:"number",min:"1",class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Department level"},null,512),[[b,o.value.level]])])]),e("div",Ge,[m(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>o.value.is_active=s),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[R,o.value.is_active]]),t[37]||(t[37]=e("label",{class:"ml-2 block text-sm text-gray-900"}," Active Department ",-1))]),e("div",Re,[e("button",{type:"button",onClick:v,class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"}," Cancel "),e("button",{type:"submit",disabled:x.value,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"},[x.value?(a(),i("i",Ke)):c("",!0),u(" "+r(p.value?"Create Department":"Update Department"),1)],8,Je)])],32)])])])):c("",!0),C.value?(a(),i("div",{key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",onClick:j},[e("div",{class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",onClick:t[10]||(t[10]=A(()=>{},["stop"]))},[e("div",Qe,[t[39]||(t[39]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[e("i",{class:"fas fa-exclamation-triangle text-red-600"})],-1)),t[40]||(t[40]=e("h3",{class:"text-lg font-medium text-gray-900 mt-4"},"Delete Department",-1)),e("div",We,[e("p",Xe,' Are you sure you want to delete "'+r(w.value?.name)+'"? This action cannot be undone. ',1)]),e("div",Ye,[e("button",{onClick:j,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400"}," Cancel "),e("button",{onClick:I,disabled:g.value,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50"},[g.value?(a(),i("i",et)):c("",!0),t[38]||(t[38]=u(" Delete ",-1))],8,Ze)])])])])):c("",!0)]))}};export{st as default};
