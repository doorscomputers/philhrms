import{g as C,c as r,o as a,a as e,b as S,k as V,w as u,m as x,p as g,F as c,r as p,t as l,n as b,d as D,f as v}from"./inertia-app-BhfqKf1u.js";const F={class:"py-12"},M={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},N={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},j={class:"p-6 bg-gray-50 border-b border-gray-200"},L=["value"],B=["value"],I=["value"],O={class:"overflow-x-auto"},H={class:"min-w-full divide-y divide-gray-200"},z={class:"bg-white divide-y divide-gray-200"},E={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},P={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},$={class:"px-6 py-4 whitespace-nowrap"},q={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},G={class:"font-medium"},J={class:"text-gray-500"},K={class:"px-6 py-4 text-sm text-gray-900"},Q={class:"px-6 py-4 text-sm"},R={key:0,class:"space-y-1"},W={class:"font-medium text-gray-600"},X={class:"flex items-center space-x-2 mt-1"},Y={class:"bg-red-100 text-red-800 px-2 py-1 rounded text-xs"},Z={class:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs"},ee={key:1,class:"text-gray-500 text-xs"},te={key:0,class:"p-6 bg-white border-t border-gray-200"},se={class:"flex items-center justify-between"},re={class:"text-sm text-gray-700"},ae={class:"flex space-x-1"},le=["onClick","disabled","innerHTML"],de={__name:"AuditTrailIndex",props:{auditTrails:Object,modelTypes:Array,actions:Array,users:Array,filters:Object},setup(i){const n=i,o=C({search:n.filters.search||"",model_type:n.filters.model_type||"",action:n.filters.action||"",user_id:n.filters.user_id||"",date_from:n.filters.date_from||"",date_to:n.filters.date_to||""}),f=()=>{v.get("/audit-trails",o.value,{preserveState:!0,replace:!0})},w=()=>{o.value={search:"",model_type:"",action:"",user_id:"",date_from:"",date_to:""},f()},h=d=>{d&&v.visit(d,{preserveState:!0,replace:!0})},_=d=>new Date(d).toLocaleString(),k=d=>d.split("\\").pop(),T=d=>d.replace(/_/g," ").replace(/\b\w/g,s=>s.toUpperCase()),A=d=>{switch(d){case"created":return"bg-green-100 text-green-800";case"updated":return"bg-blue-100 text-blue-800";case"deleted":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},U=d=>{switch(d){case"created":return"fas fa-plus";case"updated":return"fas fa-pencil";case"deleted":return"fas fa-trash";default:return"fas fa-info"}};return(d,s)=>(a(),r("div",F,[e("div",M,[e("div",N,[s[18]||(s[18]=e("div",{class:"p-6 bg-white border-b border-gray-200"},[e("div",{class:"flex justify-between items-center"},[e("div",null,[e("h2",{class:"text-xl font-semibold text-gray-900"},"Audit Trail"),e("p",{class:"text-sm text-gray-600"},"Track all changes made to system records")])])],-1)),e("div",j,[e("form",{onSubmit:V(f,["prevent"]),class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},[e("div",null,[s[6]||(s[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search",-1)),u(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>o.value.search=t),type:"text",placeholder:"Search descriptions...",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},null,512),[[x,o.value.search]])]),e("div",null,[s[8]||(s[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Model Type",-1)),u(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>o.value.model_type=t),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},[s[7]||(s[7]=e("option",{value:""},"All Types",-1)),(a(!0),r(c,null,p(i.modelTypes,t=>(a(),r("option",{key:t.value,value:t.value},l(t.label),9,L))),128))],512),[[g,o.value.model_type]])]),e("div",null,[s[10]||(s[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Action",-1)),u(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>o.value.action=t),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},[s[9]||(s[9]=e("option",{value:""},"All Actions",-1)),(a(!0),r(c,null,p(i.actions,t=>(a(),r("option",{key:t,value:t},l(t.charAt(0).toUpperCase()+t.slice(1)),9,B))),128))],512),[[g,o.value.action]])]),e("div",null,[s[12]||(s[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"User",-1)),u(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>o.value.user_id=t),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},[s[11]||(s[11]=e("option",{value:""},"All Users",-1)),(a(!0),r(c,null,p(i.users,t=>(a(),r("option",{key:t.id,value:t.id},l(t.name),9,I))),128))],512),[[g,o.value.user_id]])]),e("div",null,[s[13]||(s[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date From",-1)),u(e("input",{"onUpdate:modelValue":s[4]||(s[4]=t=>o.value.date_from=t),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},null,512),[[x,o.value.date_from]])]),e("div",null,[s[14]||(s[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date To",-1)),u(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>o.value.date_to=t),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},null,512),[[x,o.value.date_to]])]),s[15]||(s[15]=e("div",{class:"flex items-end"},[e("button",{type:"submit",class:"w-full px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 focus:bg-blue-700 active:bg-blue-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Apply Filters ")],-1)),e("div",{class:"flex items-end"},[e("button",{type:"button",onClick:w,class:"w-full px-4 py-2 bg-gray-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Clear ")])],32)]),e("div",O,[e("table",H,[s[17]||(s[17]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Timestamp "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Action "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Model "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Description "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Changes ")])],-1)),e("tbody",z,[(a(!0),r(c,null,p(i.auditTrails.data,t=>(a(),r("tr",{key:t.id,class:"hover:bg-gray-50"},[e("td",E,l(_(t.created_at)),1),e("td",P,l(t.user?.name||t.user_name||"System"),1),e("td",$,[e("span",{class:b([A(t.action),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},[e("i",{class:b([U(t.action),"mr-1"])},null,2),D(" "+l(t.action.charAt(0).toUpperCase()+t.action.slice(1)),1)],2)]),e("td",q,[e("div",null,[e("div",G,l(k(t.model_type)),1),e("div",J,"ID: "+l(t.model_id),1)])]),e("td",K,l(t.description),1),e("td",Q,[t.changed_fields&&Object.keys(t.changed_fields).length>0?(a(),r("div",R,[(a(!0),r(c,null,p(t.changed_fields,(m,y)=>(a(),r("div",{key:y,class:"text-xs"},[e("span",W,l(T(y))+":",1),e("div",X,[e("span",Y,l(m.old||"N/A"),1),s[16]||(s[16]=e("i",{class:"fas fa-arrow-right text-gray-400 text-xs"},null,-1)),e("span",Z,l(m.new||"N/A"),1)])]))),128))])):(a(),r("span",ee,"No changes recorded"))])]))),128))])])]),i.auditTrails.links&&i.auditTrails.links.length>3?(a(),r("div",te,[e("div",se,[e("div",re," Showing "+l(i.auditTrails.from)+" to "+l(i.auditTrails.to)+" of "+l(i.auditTrails.total)+" results ",1),e("div",ae,[(a(!0),r(c,null,p(i.auditTrails.links,t=>(a(),r("button",{key:t.label,onClick:m=>h(t.url),disabled:!t.url,class:b([{"bg-blue-600 text-white":t.active,"bg-gray-300 text-gray-500 cursor-not-allowed":!t.url,"bg-white text-gray-700 hover:bg-gray-50":t.url&&!t.active},"px-3 py-2 text-sm font-medium border border-gray-300 rounded-md"]),innerHTML:t.label},null,10,le))),128))])])])):S("",!0)])])]))}};export{de as default};
