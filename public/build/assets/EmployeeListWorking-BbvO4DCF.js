import{c as a,o as n,a as e,b as p,d as y,w as m,j as h,k as f,F as g,r as u,t as l,q as _}from"./inertia-app-B2ltxMEQ.js";import{_ as b}from"./_plugin-vue_export-helper-DlAUqK2U.js";const w={name:"EmployeeListWorking",data(){return{employees:[],departments:[],loading:!0,error:null,searchQuery:"",selectedDepartment:"",filteredEmployees:[]}},mounted(){console.log("EmployeeListWorking component mounted"),this.loadEmployees(),this.loadDepartments()},methods:{async loadEmployees(){try{this.loading=!0,this.error=null;const r=await this.$http.get("/api/employees");console.log("API Response:",r.data),this.employees=r.data.data||r.data||[],this.filteredEmployees=[...this.employees]}catch(r){console.error("Error loading employees:",r),this.error=r.response?.data?.message||"Failed to load employees",this.employees=[],this.filteredEmployees=[]}finally{this.loading=!1}},async loadDepartments(){try{const r=await this.$http.get("/api/departments");this.departments=r.data.data||r.data||[]}catch(r){console.error("Error loading departments:",r)}},searchEmployees(){this.filterEmployees()},filterEmployees(){let r=[...this.employees];if(this.searchQuery){const t=this.searchQuery.toLowerCase();r=r.filter(d=>{const c=`${d.first_name} ${d.last_name}`.toLowerCase(),o=(d.email||"").toLowerCase(),i=(d.employee_id||"").toLowerCase();return c.includes(t)||o.includes(t)||i.includes(t)})}this.selectedDepartment&&(r=r.filter(t=>t.department_id==this.selectedDepartment)),this.filteredEmployees=r},getInitials(r,t){const d=r?r.charAt(0).toUpperCase():"",c=t?t.charAt(0).toUpperCase():"";return d+c},getStatusClass(r){return r?"bg-green-100 text-green-800":"bg-red-100 text-red-800"},formatDate(r){return r?new Date(r).toLocaleDateString():"N/A"},handleImageError(r){r.target.style.display="none"}}},v={class:"p-6"},E={class:"bg-white rounded-lg shadow-sm p-6 mb-6"},k={class:"flex gap-4"},D={class:"flex-1"},A={class:"w-48"},C=["value"],L={key:0,class:"bg-white rounded-lg shadow-sm p-12 text-center"},I={key:1,class:"bg-white rounded-lg shadow-sm p-12 text-center"},S={class:"text-gray-600 mb-4"},j={key:2,class:"bg-white rounded-lg shadow-sm overflow-hidden"},N={class:"overflow-x-auto"},Q={class:"min-w-full divide-y divide-gray-200"},V={class:"bg-white divide-y divide-gray-200"},T={key:0},U={colspan:"6",class:"px-6 py-12 text-center text-gray-500"},B={class:"flex flex-col items-center"},F={class:"text-sm"},W={class:"px-6 py-4 whitespace-nowrap"},q={class:"flex items-center"},M={class:"flex-shrink-0 h-10 w-10"},P=["src","alt"],R={key:1,class:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center"},z={class:"text-indigo-600 font-medium"},H={class:"ml-4"},G={class:"text-sm font-medium text-gray-900"},J={class:"text-sm text-gray-500"},K={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},O={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},X={class:"px-6 py-4 whitespace-nowrap"},Y={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Z={class:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2"},$=["to"],ee=["to"],te={key:3,class:"bg-white px-6 py-3 border-t border-gray-200 rounded-b-lg"},se={class:"flex justify-between items-center"},re={class:"text-sm text-gray-700"};function oe(r,t,d,c,o,i){return n(),a("div",v,[t[15]||(t[15]=e("div",{class:"flex justify-between items-center mb-6"},[e("h2",{class:"text-2xl font-bold text-gray-900"},"Employee Records"),e("router-link",{to:"/employees/create",class:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200 flex items-center"},[e("i",{class:"fas fa-plus mr-2"}),y(" Add Employee ")])],-1)),e("div",E,[e("div",k,[e("div",D,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search Employees",-1)),m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.searchQuery=s),type:"text",placeholder:"Search by name, ID, or email...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",onInput:t[1]||(t[1]=(...s)=>i.searchEmployees&&i.searchEmployees(...s))},null,544),[[h,o.searchQuery]])]),e("div",A,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Department",-1)),m(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.selectedDepartment=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",onChange:t[3]||(t[3]=(...s)=>i.filterEmployees&&i.filterEmployees(...s))},[t[7]||(t[7]=e("option",{value:""},"All Departments",-1)),(n(!0),a(g,null,u(o.departments,s=>(n(),a("option",{key:s.id,value:s.id},l(s.name),9,C))),128))],544),[[f,o.selectedDepartment]])])])]),o.loading?(n(),a("div",L,[...t[9]||(t[9]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"},null,-1),e("p",{class:"text-gray-600"},"Loading employees...",-1)])])):o.error?(n(),a("div",I,[t[10]||(t[10]=e("div",{class:"text-red-500 mb-4"},[e("i",{class:"fas fa-exclamation-triangle text-4xl"})],-1)),t[11]||(t[11]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Error Loading Employees",-1)),e("p",S,l(o.error),1),e("button",{onClick:t[4]||(t[4]=(...s)=>i.loadEmployees&&i.loadEmployees(...s)),class:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700"}," Try Again ")])):(n(),a("div",j,[e("div",N,[e("table",Q,[t[14]||(t[14]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Employee "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Department "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Position "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Hire Date "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",V,[o.filteredEmployees.length===0?(n(),a("tr",T,[e("td",U,[e("div",B,[t[12]||(t[12]=e("i",{class:"fas fa-users text-4xl text-gray-300 mb-4"},null,-1)),t[13]||(t[13]=e("p",{class:"text-lg font-medium"},"No employees found",-1)),e("p",F,l(o.searchQuery?"Try adjusting your search criteria":"Start by adding your first employee"),1)])])])):p("",!0),(n(!0),a(g,null,u(o.filteredEmployees,s=>(n(),a("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",W,[e("div",q,[e("div",M,[s.photo?(n(),a("img",{key:0,src:`/storage/${s.photo}`,alt:s.first_name,class:"h-10 w-10 rounded-full object-cover",onError:t[5]||(t[5]=(...x)=>i.handleImageError&&i.handleImageError(...x))},null,40,P)):(n(),a("div",R,[e("span",z,l(i.getInitials(s.first_name,s.last_name)),1)]))]),e("div",H,[e("div",G,l(s.first_name)+" "+l(s.last_name),1),e("div",J," ID: "+l(s.employee_id||"N/A"),1)])])]),e("td",K,l(s.department?.name||"N/A"),1),e("td",O,l(s.position?.title||"N/A"),1),e("td",X,[e("span",{class:_([i.getStatusClass(s.is_active),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},l(s.is_active?"Active":"Inactive"),3)]),e("td",Y,l(i.formatDate(s.hire_date)),1),e("td",Z,[e("router-link",{to:`/employees/${s.id}`,class:"text-indigo-600 hover:text-indigo-900"}," View ",8,$),e("router-link",{to:`/employees/${s.id}/edit`,class:"text-blue-600 hover:text-blue-900"}," Edit ",8,ee)])]))),128))])])])])),o.filteredEmployees.length>0?(n(),a("div",te,[e("div",se,[e("p",re," Showing "+l(o.filteredEmployees.length)+" of "+l(o.employees.length)+" employees ",1)])])):p("",!0)])}const ae=b(w,[["render",oe]]);export{ae as default};
